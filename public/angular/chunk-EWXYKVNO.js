import{a as M}from"./chunk-H44RTLCJ.js";import{a as g,b as T}from"./chunk-SKE27VCB.js";import{$ as P,B as s,Ba as b,C as p,G as m,H as x,J as d,N as o,O as r,P as C,Q as u,R as _,S as f,X as h,g as v,p as S,t as l,u as c}from"./chunk-P2ZFRGZW.js";function O(i,t){if(i&1){let e=u();o(0,"app-textarea",5),_("sendText",function(a){l(e);let A=f();return c(A.add(a))}),r()}}function I(i,t){i&1&&(o(0,"p",2),h(1,"Login to post"),r())}function V(i,t){if(i&1){let e=u();o(0,"button",6),_("click",function(){l(e);let a=f();return c(a.loadOlder())}),h(1,"Load Older"),r()}}var w=class i{constructor(t,e){this._postService=t;this._authService=e}allPosts=[];hideLoadMore=!1;ngOnInit(){this.getAllPosts()}getAllPosts(){this._postService.getAllPosts(this._authService.userdata()?.id??null).subscribe({next:t=>{this.allPosts=t}})}add(t){this._postService.addNewPost({content:t.content,parentpostid:null,file:t.file}).pipe(v(1e3)).subscribe({next:e=>{this.getAllPosts(),this._postService.postSuccessSubject.next(1)},error:e=>{alert(e.error),this._postService.postSuccessSubject.next(-1)}})}loadOlder(){this._postService.mainCache.pageno++,this.getAllPosts()}static \u0275fac=function(e){return new(e||i)(p(g),p(b))};static \u0275cmp=S({type:i,selectors:[["app-main"]],standalone:!0,features:[P],decls:5,vars:4,consts:[[1,"container"],["placeholderText","What is happening?"],[1,"text-area-p"],[3,"list","showSeperator"],[1,"center-block"],["placeholderText","What is happening?",3,"sendText"],[1,"center-block",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0),m(1,O,1,0,"app-textarea",1)(2,I,2,0,"p",2),C(3,"app-postlist",3),m(4,V,2,0,"button",4),r()),e&2&&(s(),d(n._authService.userdata()?1:2),s(2),x("list",n.allPosts)("showSeperator",!1),s(),d(n.hideLoadMore?-1:4))},dependencies:[T,M]})};export{w as MainComponent};
