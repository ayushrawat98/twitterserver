import{a as Q}from"./chunk-YLIMJVLL.js";import{B as m,C as h,G as v,H as b,J as T,M as s,N as l,O as k,P as _,Q as c,R as w,S as y,T as P,U as E,V as g,W as r,X as O,Y as R,_ as M,c as S,ca as B,h as F,ma as j,p as V,r as D,t as u,u as p,x as f,y as x,z as I}from"./chunk-MLTJO6UL.js";var C=class o{constructor(e){this.el=e}countChange=f();onInput(){let e=this.el.nativeElement.value.length;this.countChange.emit(e)}static \u0275fac=function(n){return new(n||o)(h(I))};static \u0275dir=D({type:o,selectors:[["","appCharactercounter",""]],hostBindings:function(n,t){n&1&&c("input",function(){return t.onInput()})},outputs:{countChange:"countChange"},standalone:!0})};var z=["comment"],L=["fileinput"],N=(o,e,n)=>({green:o,orange:e,red:n});function U(o,e){if(o&1){let n=_();s(0,"button",6),c("click",function(){u(n),w();let i=g(5);return p(i.click())}),r(1,"Upload"),l(),r(2," \xA0 ")}}function $(o,e){if(o&1){let n=_();s(0,"button",6),c("click",function(){u(n);let i=w(),d=g(5);return i.choosenFile=null,p(d.value="")}),r(1,"Remove"),l(),r(2," \xA0 ")}}function q(o,e){o&1&&k(0,"br")(1,"progress",7)}var H=class o{constructor(e){this._postService=e}charCount=255;placeholderText=x();disablePostButton=x(!1);sendText=f();choosenFile;textbox;fileinput;showProgress=!1;destroy$=new S;ngOnInit(){this._postService.postSuccessSubject.pipe(F(this.destroy$)).subscribe({next:e=>{e=="success"?(this.textbox.nativeElement.value="",this.fileinput.nativeElement.value="",this.choosenFile=null,this.showProgress=!1,this.charCount=255):e=="fail"&&(this.showProgress=!1)}})}updateCount(e){this.charCount=255-e}add(e){this.sendText.emit({content:e,file:this.choosenFile,parentpostid:null}),this.showProgress=!0}fileSelected(e){let n=e.target;this.setFile(n?.files)}setFile(e){e&&e?.length?this.choosenFile=e[0]:this.choosenFile=null}ngOnDestroy(){this.destroy$.next("End"),this.destroy$.complete()}static \u0275fac=function(n){return new(n||o)(h(Q))};static \u0275cmp=V({type:o,selectors:[["app-textarea"]],viewQuery:function(n,t){if(n&1&&(y(z,5),y(L,5)),n&2){let i;P(i=E())&&(t.textbox=i.first),P(i=E())&&(t.fileinput=i.first)}},inputs:{placeholderText:[1,"placeholderText"],disablePostButton:[1,"disablePostButton"]},outputs:{sendText:"sendText"},standalone:!0,features:[M],decls:14,vars:11,consts:[["comment",""],["fileinput",""],["rows","5","appCharactercounter","",3,"countChange","paste","placeholder","ngClass"],["type","file","accept","image/jpeg,image/png,image/jpg,image/gif,video/mp4,video/webm","hidden","",2,"margin-left","auto",3,"change"],[1,"filename"],[3,"click","disabled"],[3,"click"],["aria-busy","true"]],template:function(n,t){if(n&1){let i=_();s(0,"textarea",2,0),c("countChange",function(a){return u(i),p(t.updateCount(a))})("paste",function(a){return u(i),p(t.setFile(a.clipboardData==null?null:a.clipboardData.files))}),l(),s(2,"div"),r(3),s(4,"input",3,1),c("change",function(a){return u(i),p(t.fileSelected(a))}),l(),v(6,U,3,0)(7,$,3,0),s(8,"span",4),r(9),l(),r(10," \xA0 "),s(11,"button",5),c("click",function(){u(i);let a=g(1);return p(t.add(a.value))}),r(12,"Post"),l(),v(13,q,2,0),l()}n&2&&(b("placeholder",t.placeholderText())("ngClass",B(7,N,t.charCount>=160,t.charCount<160&&t.charCount>=60,t.charCount<60)),m(3),R(" ",t.charCount," \xA0 "),m(3),T(t.choosenFile?7:6),m(3),O(t.choosenFile?t.choosenFile.name:""),m(2),b("disabled",t.disablePostButton()),m(2),T(t.showProgress?13:-1))},dependencies:[C,j],styles:["textarea[_ngcontent-%COMP%]{margin:8px 0;width:100%;font-size:16px;padding:8px;border-radius:2px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;resize:none;background-color:transparent;color:#f5f5f5;border-color:#2e4052}textarea[_ngcontent-%COMP%]:focus-visible.green{outline:green;border-color:green}textarea[_ngcontent-%COMP%]:focus-visible.orange{border-color:orange;outline:orange}textarea[_ngcontent-%COMP%]:focus-visible.red{border-color:red;outline:red}.filename[_ngcontent-%COMP%]{font-size:12px}"]})};export{H as a};
