import{a as j}from"./chunk-6GAUQJJ6.js";import{A as S,C as m,D as f,H as F,I as v,K as I,O as a,P as s,Q as D,R as O,S as l,U as _,V as x,W as b,X as y,Y as c,Z as V,_ as k,aa as M,c as T,ea as R,i as w,oa as B,q as P,s as E,u,v as p,y as d,z as C}from"./chunk-7YCM2XEO.js";var h=class o{constructor(e){this.el=e}countChange=d();onInput(){let e=this.el.nativeElement.value.length;this.countChange.emit(e)}static \u0275fac=function(n){return new(n||o)(f(S))};static \u0275dir=E({type:o,selectors:[["","appCharactercounter",""]],hostBindings:function(n,t){n&1&&l("input",function(){return t.onInput()})},outputs:{countChange:"countChange"},standalone:!0})};var $=["comment"],z=["fileinput"],A=(o,e,n)=>({green:o,orange:e,red:n});function N(o,e){o&1&&D(0,"br")(1,"progress",7)}var Q=class o{constructor(e){this._postService=e}charCount=255;placeholderText=C();disablePostButton=C(!1);sendText=d();choosenFile;textbox;fileinput;showProgress=!1;destroy$=new T;ngOnInit(){this._postService.postSuccessSubject.pipe(w(this.destroy$)).subscribe({next:e=>{e=="success"?(this.textbox.nativeElement.value="",this.fileinput.nativeElement.value="",this.choosenFile=null,this.showProgress=!1,this.charCount=255):e=="fail"&&(this.showProgress=!1)}})}updateCount(e){this.charCount=255-e}add(e){this.sendText.emit({content:e,file:this.choosenFile,parentpostid:null}),this.showProgress=!0}setFile(e){let n=e.target;n?.files?.length?this.choosenFile=n.files[0]:this.choosenFile=null}ngOnDestroy(){this.destroy$.next("End"),this.destroy$.complete()}static \u0275fac=function(n){return new(n||o)(f(j))};static \u0275cmp=P({type:o,selectors:[["app-textarea"]],viewQuery:function(n,t){if(n&1&&(_($,5),_(z,5)),n&2){let i;x(i=b())&&(t.textbox=i.first),x(i=b())&&(t.fileinput=i.first)}},inputs:{placeholderText:[1,"placeholderText"],disablePostButton:[1,"disablePostButton"]},outputs:{sendText:"sendText"},standalone:!0,features:[M],decls:15,vars:10,consts:[["comment",""],["fileinput",""],["rows","5","appCharactercounter","",3,"countChange","placeholder","ngClass"],["type","file","accept","image/jpeg,image/png,image/jpg,image/gif,video/mp4,video/webm","hidden","",2,"margin-left","auto",3,"change"],[3,"click"],[1,"filename"],[3,"click","disabled"],["aria-busy","true"]],template:function(n,t){if(n&1){let i=O();a(0,"textarea",2,0),l("countChange",function(r){return u(i),p(t.updateCount(r))}),s(),a(2,"div"),c(3),a(4,"input",3,1),l("change",function(r){return u(i),p(t.setFile(r))}),s(),a(6,"button",4),l("click",function(){u(i);let r=y(5);return p(r.click())}),c(7,"Upload"),s(),c(8," \xA0 "),a(9,"span",5),c(10),s(),c(11," \xA0 "),a(12,"button",6),l("click",function(){u(i);let r=y(1);return p(t.add(r.value))}),c(13,"Post"),s(),F(14,N,2,0),s()}n&2&&(v("placeholder",t.placeholderText())("ngClass",R(6,A,t.charCount>=160,t.charCount<160&&t.charCount>=60,t.charCount<60)),m(3),k(" ",t.charCount," \xA0 "),m(7),V(t.choosenFile?t.choosenFile.name:""),m(2),v("disabled",t.disablePostButton()),m(2),I(t.showProgress?14:-1))},dependencies:[h,B],styles:["textarea[_ngcontent-%COMP%]{margin:8px 0;width:100%;font-size:16px;padding:8px;border-radius:2px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;resize:none;background-color:transparent;color:#f5f5f5;border-color:#2e4052}textarea[_ngcontent-%COMP%]:focus-visible.green{outline:green;border-color:green}textarea[_ngcontent-%COMP%]:focus-visible.orange{border-color:orange;outline:orange}textarea[_ngcontent-%COMP%]:focus-visible.red{border-color:red;outline:red}.filename[_ngcontent-%COMP%]{font-size:12px}"]})};export{Q as a};
