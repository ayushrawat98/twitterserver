import{a as j}from"./chunk-LBBA54BF.js";import{a as A,b as E,c as R}from"./chunk-LGAN6I3W.js";import{B as r,C as p,G as d,H as u,J as l,M as n,N as s,O as _,P as h,Q as P,R as c,S as y,T as g,U as S,W as m,_ as T,g as x,p as f,pa as b,ra as w,t as v,u as C,va as I}from"./chunk-N2VRIK4C.js";var D=["emptydiv"];function M(i,t){i&1&&m(0," Loading... ")}function Q(i,t){if(i&1&&_(0,"app-postlist",2),i&2){let e=c(3);u("list",e.post.ParentPosts)("showSeperator",!0)}}function N(i,t){if(i&1){let e=h();n(0,"app-textarea",7),P("sendText",function(a){v(e);let O=c(3);return C(O.add(a))}),s()}}function U(i,t){i&1&&(n(0,"p",5),m(1,"Login to post"),s())}function k(i,t){if(i&1&&(n(0,"div",1),d(1,Q,1,2,"app-postlist",2),_(2,"app-post",3),n(3,"div",null,0),m(5,"\xA0"),s(),d(6,N,1,0,"app-textarea",4)(7,U,2,0,"p",5),_(8,"app-postlist",6),s()),i&2){let e=c(2);r(),l(e.post.ParentPosts?1:-1),r(),u("post",e.post),r(4),l(e._authservice.userdata()?6:7),r(2),u("list",e.post.ChildPosts)}}function z(i,t){i&1&&(n(0,"p"),m(1,"Post doesn't exist"),s())}function F(i,t){if(i&1&&d(0,k,9,4,"div",1)(1,z,2,0,"p"),i&2){let e=c();l(e.post?0:1)}}var V=class i{constructor(t,e,o,a){this.route=t;this._postservice=e;this._authservice=o;this.router=a}post;clearTextArea=0;emptydiv;data;loading=!0;ngOnInit(){this.route.params.pipe().subscribe({next:t=>{this.data={username:t.username,id:t.id},this.getPost()}})}getPost(){this.loading=!0,this._postservice.getUserPostById(this.data.username,this.data.id).pipe().subscribe({next:t=>{this.post=t,this.loading=!1,setTimeout(()=>this.emptydiv.nativeElement.scrollIntoView({behavior:"smooth"}),600)},error:t=>{console.log(t)}})}add(t){let e=this._authservice.userdata()?.id??0;e!=0&&this._postservice.addNewPost({content:t.content,id:e,parentpostid:this.post.id,file:t.file}).pipe(x(1e3)).subscribe({next:o=>{this.getPost(),this._postservice.postSuccessSubject.next(1)},error:o=>{alert(o.error),this._postservice.postSuccessSubject.next(-1)}})}static \u0275fac=function(e){return new(e||i)(p(b),p(R),p(I),p(w))};static \u0275cmp=f({type:i,selectors:[["app-postexpanded"]],viewQuery:function(e,o){if(e&1&&y(D,5),e&2){let a;g(a=S())&&(o.emptydiv=a.first)}},standalone:!0,features:[T],decls:2,vars:1,consts:[["emptydiv",""],[1,"container"],[3,"list","showSeperator"],[3,"post"],["placeholderText","Post your reply"],[1,"text-area-p"],[3,"list"],["placeholderText","Post your reply",3,"sendText"]],template:function(e,o){e&1&&d(0,M,1,0)(1,F,2,1),e&2&&l(o.loading?0:1)},dependencies:[E,A,j],styles:["textarea[_ngcontent-%COMP%]{margin:8px 0;width:100%;font-size:16px;padding:8px;border-radius:2px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;resize:none}"]})};export{V as PostexpandedComponent};
