import{a as j}from"./chunk-X6AC3SVN.js";import{a as R,b as E}from"./chunk-WNFGF7OE.js";import{C as s,Ca as A,D as r,H as d,I as c,K as l,O as a,P as p,Q as m,R as C,S as P,T as u,U as y,V as S,W as b,Y as f,aa as g,ca as w,g as x,q as v,u as _,v as h,va as T,xa as I}from"./chunk-7YCM2XEO.js";var D=["emptydiv"],M=i=>[i];function Q(i,t){if(i&1&&m(0,"app-postlist",2),i&2){let e=u(2);c("list",e.post.ParentPosts)("showSeperator",!0)}}function F(i,t){if(i&1){let e=C();a(0,"app-textarea",6),P("sendText",function(n){_(e);let O=u(2);return h(O.add(n))}),p()}}function N(i,t){i&1&&(a(0,"p",4),f(1,"Login to post"),p())}function U(i,t){if(i&1&&(a(0,"div",1),d(1,Q,1,2,"app-postlist",2),m(2,"app-postlist",2),a(3,"div",null,0),f(5,"\xA0"),p(),d(6,F,1,0,"app-textarea",3)(7,N,2,0,"p",4),m(8,"app-postlist",5),p()),i&2){let e=u();s(),l(e.post.ParentPosts?1:-1),s(),c("list",w(5,M,e.post))("showSeperator",!1),s(4),l(e._authservice.userdata()?6:7),s(2),c("list",e.post.ChildPosts)}}var V=class i{constructor(t,e,o,n){this.route=t;this._postservice=e;this._authservice=o;this.router=n}post;clearTextArea=0;emptydiv;data;ngOnInit(){this.route.params.pipe().subscribe({next:t=>{this.data={username:t.username,id:t.id},this.getPost()}})}getPost(){this._postservice.getUserPostById(this.data.username,this.data.id,this._authservice.userdata()?.id??null).pipe().subscribe({next:t=>{this.post=t,setTimeout(()=>this.emptydiv.nativeElement.scrollIntoView({behavior:"smooth"}),600)},error:t=>{console.log(t)}})}add(t){(this._authservice.userdata()?.id??0)!=0&&this._postservice.addNewPost({content:t.content,parentpostid:this.post.id,file:t.file}).pipe(x(1e3)).subscribe({next:o=>{this.getPost(),this._postservice.postSuccessSubject.next(1)},error:o=>{alert(o.error),this._postservice.postSuccessSubject.next(-1)}})}static \u0275fac=function(e){return new(e||i)(r(T),r(R),r(A),r(I))};static \u0275cmp=v({type:i,selectors:[["app-postexpanded"]],viewQuery:function(e,o){if(e&1&&y(D,5),e&2){let n;S(n=b())&&(o.emptydiv=n.first)}},standalone:!0,features:[g],decls:1,vars:1,consts:[["emptydiv",""],[1,"container"],[3,"list","showSeperator"],["placeholderText","Post your reply"],[1,"text-area-p"],[3,"list"],["placeholderText","Post your reply",3,"sendText"]],template:function(e,o){e&1&&d(0,U,9,7,"div",1),e&2&&l(o.post?0:-1)},dependencies:[E,j],styles:["textarea[_ngcontent-%COMP%]{margin:8px 0;width:100%;font-size:16px;padding:8px;border-radius:2px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;resize:none}"]})};export{V as PostexpandedComponent};
