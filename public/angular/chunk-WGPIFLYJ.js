import{a as T}from"./chunk-LBBA54BF.js";import{b as C,c as b}from"./chunk-LGAN6I3W.js";import{B as r,C as a,G as u,H as f,J as h,M as o,N as n,O as v,P as _,Q as S,R as x,W as p,_ as P,g as l,p as c,t as m,u as d,va as g}from"./chunk-N2VRIK4C.js";function w(i,t){if(i&1){let e=_();o(0,"app-textarea",5),S("sendText",function(A){m(e);let M=x();return d(M.add(A))}),n()}}function O(i,t){i&1&&(o(0,"p",2),p(1,"Login to post"),n())}var I=class i{constructor(t,e){this._postservice=t;this._authservice=e}allPosts;ngOnInit(){sessionStorage.getItem("posts")?this.allPosts=JSON.parse(sessionStorage.getItem("posts")??""):this.getAllPosts()}getAllPosts(){this._postservice.getAllPosts().subscribe({next:t=>{this.allPosts=t,sessionStorage.setItem("posts",JSON.stringify(this.allPosts))}})}add(t){let e=this._authservice.userdata()?.id??0;e!=0&&this._postservice.addNewPost({content:t.content,id:e,parentpostid:null,file:t.file}).pipe(l(1e3)).subscribe({next:s=>{this.getAllPosts(),this._postservice.postSuccessSubject.next(1)},error:s=>{alert(s.error),this._postservice.postSuccessSubject.next(-1)}})}static \u0275fac=function(e){return new(e||i)(a(b),a(g))};static \u0275cmp=c({type:i,selectors:[["app-main"]],standalone:!0,features:[P],decls:6,vars:3,consts:[[1,"container"],["placeholderText","What is happening?"],[1,"text-area-p"],[3,"list","showSeperator"],[1,"center-block"],["placeholderText","What is happening?",3,"sendText"]],template:function(e,s){e&1&&(o(0,"div",0),u(1,w,1,0,"app-textarea",1)(2,O,2,0,"p",2),v(3,"app-postlist",3),o(4,"button",4),p(5,"Load Older"),n()()),e&2&&(r(),h(s._authservice.userdata()?1:2),r(2),f("list",s.allPosts)("showSeperator",!1))},dependencies:[C,T]})};export{I as MainComponent};
