import{a as E}from"./chunk-ZW2N32WY.js";import{a as U,b as H}from"./chunk-6KBF5XCT.js";import{Aa as j,B as s,C as a,Ga as D,H as p,Ha as v,M as r,N as o,O as b,P as y,Q as P,V as I,W as u,X as d,ba as f,ca as O,ga as M,ha as A,o as c,s as h,sa as w,t as _,x as C,z as S}from"./chunk-K4OJKT4O.js";var g=class l{constructor(i,t){this._userService=i;this._authService=t}username=C.required();details;baseUrl=D.baseUrl;ngOnInit(){this._userService.getDetails(this.username()).subscribe(i=>{this.details=i})}changePicture(i){let t=i.target,e={bio:this.details.bio,displayname:this.details.displayname,profilepicture:t.files&&t.files[0]};this._userService.setDetails(e).subscribe(n=>{this.details=n,window.location.reload()})}static \u0275fac=function(t){return new(t||l)(a(E),a(v))};static \u0275cmp=c({type:l,selectors:[["app-profile-header"]],inputs:{username:[1,"username"]},standalone:!0,features:[f],decls:11,vars:4,consts:[["pp",""],[1,"container"],["alt","profile picture","type","image/jpeg",3,"click","src"],[1,"subcontainer"],["hidden","true","type","file","accept","image/jpeg,image/png,image/jpg,image/gif",3,"change"]],template:function(t,e){if(t&1){let n=y();r(0,"div",1)(1,"img",2),P("click",function(){let m;h(n);let V=I(10);return _(((m=e._authService.userdata())==null?null:m.id)==(e.details==null?null:e.details.id)?V.click():"")}),o(),r(2,"div",3)(3,"h2"),u(4),o(),r(5,"h3"),u(6),o(),r(7,"h5"),u(8),o()()(),r(9,"input",4,0),P("change",function(m){return h(n),_(e.changePicture(m))}),o()}t&2&&(s(),p("src",e.details!=null&&e.details.profilepicture?e.baseUrl+"/"+(e.details==null?null:e.details.profilepicture):"default.png",S),s(3),d(e.details==null?null:e.details.displayname),s(2),d("@"+(e.details==null?null:e.details.username)),s(2),d(e.details==null?null:e.details.bio))},styles:["img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50%;object-fit:cover}.container[_ngcontent-%COMP%]{display:flex}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin:0}.subcontainer[_ngcontent-%COMP%]{padding:0 16px}"]})};var R=()=>[],F=class l{constructor(i,t,e){this._postservice=i;this._authservice=t;this.route=e}postList$;username;ngOnInit(){this.route.paramMap.subscribe({next:i=>{this.username=i.get("username"),this.postList$=this._postservice.getAllUserPosts(i.get("username"),this._authservice.userdata()?.id)},error:i=>{}})}static \u0275fac=function(t){return new(t||l)(a(U),a(v),a(j))};static \u0275cmp=c({type:l,selectors:[["app-profile"]],standalone:!0,features:[f],decls:4,vars:5,consts:[[3,"username"],[1,"container"],[3,"list"]],template:function(t,e){if(t&1&&(b(0,"app-profile-header",0),r(1,"div",1),b(2,"app-postlist",2),M(3,"async"),o()),t&2){let n;p("username",e.username),s(2),p("list",(n=A(3,2,e.postList$))!==null&&n!==void 0?n:O(4,R))}},dependencies:[w,H,g]})};export{F as ProfileComponent};
