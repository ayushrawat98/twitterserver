import{a as D}from"./chunk-ZW2N32WY.js";import{a as H,b as R}from"./chunk-33Z2X7YL.js";import{Aa as U,B as s,C as a,Ga as j,H as p,Ha as f,M as r,N as o,O as _,P as y,Q as C,S,T as I,U as O,W as c,X as u,ba as d,ca as w,ga as M,ha as A,o as m,s as h,sa as E,t as g,x as P,z as b}from"./chunk-K4OJKT4O.js";var Q=["pp"],v=class l{constructor(i,t){this._userService=i;this._authService=t}username=P.required();details;baseUrl=j.baseUrl;ngOnInit(){this._userService.getDetails(this.username()).subscribe(i=>{this.details=i})}changePicture(i){let t=i.target,e={bio:this.details.bio,displayname:this.details.displayname,profilepicture:t.files&&t.files[0]};this._userService.setDetails(e).subscribe(n=>{this.details=n,window.location.reload()})}pp;isUser(){this._authService.userdata()?.id==this.details.id&&this.pp.nativeElement.click()}static \u0275fac=function(t){return new(t||l)(a(D),a(f))};static \u0275cmp=m({type:l,selectors:[["app-profile-header"]],viewQuery:function(t,e){if(t&1&&S(Q,5),t&2){let n;I(n=O())&&(e.pp=n.first)}},inputs:{username:[1,"username"]},standalone:!0,features:[d],decls:11,vars:4,consts:[["pp",""],[1,"container"],["alt","profile picture","type","image/jpeg",3,"click","src"],[1,"subcontainer"],["hidden","true","type","file","accept","image/jpeg,image/png,image/jpg,image/gif",3,"change"]],template:function(t,e){if(t&1){let n=y();r(0,"div",1)(1,"img",2),C("click",function(){return h(n),g(e.isUser())}),o(),r(2,"div",3)(3,"h2"),c(4),o(),r(5,"h3"),c(6),o(),r(7,"h5"),c(8),o()()(),r(9,"input",4,0),C("change",function(T){return h(n),g(e.changePicture(T))}),o()}t&2&&(s(),p("src",e.details!=null&&e.details.profilepicture?e.baseUrl+"/"+(e.details==null?null:e.details.profilepicture):"default.png",b),s(3),u(e.details==null?null:e.details.displayname),s(2),u("@"+(e.details==null?null:e.details.username)),s(2),u(e.details==null?null:e.details.bio))},styles:["img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50%;object-fit:cover}.container[_ngcontent-%COMP%]{display:flex}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin:0}.subcontainer[_ngcontent-%COMP%]{padding:0 16px}"]})};var $=()=>[],V=class l{constructor(i,t,e){this._postservice=i;this._authservice=t;this.route=e}postList$;username;ngOnInit(){this.route.paramMap.subscribe({next:i=>{this.username=i.get("username"),this.postList$=this._postservice.getAllUserPosts(i.get("username"),this._authservice.userdata()?.id)},error:i=>{}})}static \u0275fac=function(t){return new(t||l)(a(H),a(f),a(U))};static \u0275cmp=m({type:l,selectors:[["app-profile"]],standalone:!0,features:[d],decls:4,vars:5,consts:[[3,"username"],[1,"container"],[3,"list"]],template:function(t,e){if(t&1&&(_(0,"app-profile-header",0),r(1,"div",1),_(2,"app-postlist",2),M(3,"async"),o()),t&2){let n;p("username",e.username),s(2),p("list",(n=A(3,2,e.postList$))!==null&&n!==void 0?n:w(4,$))}},dependencies:[E,R,v]})};export{V as ProfileComponent};
