import{a as E}from"./chunk-GYFRJGPP.js";import{a as B,b as R}from"./chunk-MZ7H3CGF.js";import{B as s,Ba as A,C as r,G as l,H as a,J as m,M as p,N as d,O as u,P,Q as C,R as c,S as b,T as y,U as S,W as f,_ as g,aa as w,g as x,p as v,t as _,u as h,ua as T,wa as I}from"./chunk-MLTJO6UL.js";var O=["emptydiv"],D=i=>[i];function M(i,e){if(i&1&&u(0,"app-postlist",2),i&2){let t=c(2);a("list",t.post.ParentPosts)("showSeperator",!0)}}function Q(i,e){if(i&1){let t=P();p(0,"app-textarea",6),C("sendText",function(n){_(t);let V=c(2);return h(V.add(n))}),d()}if(i&2){let t=c(2);a("disablePostButton",t.disablePostButton)}}function F(i,e){i&1&&(p(0,"p",4),f(1,"Login to post"),d())}function N(i,e){if(i&1&&(p(0,"div",1),l(1,M,1,2,"app-postlist",2),u(2,"app-postlist",2),p(3,"div",null,0),f(5,"\xA0"),d(),l(6,Q,1,1,"app-textarea",3)(7,F,2,0,"p",4),u(8,"app-postlist",5),d()),i&2){let t=c();s(),m(t.post.ParentPosts?1:-1),s(),a("list",w(5,D,t.post))("showSeperator",!1),s(4),m(t._authservice.userdata()?6:7),s(2),a("list",t.post.ChildPosts)}}var j=class i{constructor(e,t,o,n){this.route=e;this._postservice=t;this._authservice=o;this.router=n}post;clearTextArea=0;emptydiv;data;disablePostButton=!1;ngOnInit(){this.route.params.pipe().subscribe({next:e=>{this.data={username:e.username,id:e.id},this.getPost()}})}getPost(){this._postservice.getUserPostById(this.data.username,this.data.id,this._authservice.userdata()?.id??null).pipe().subscribe({next:e=>{this.post=e,setTimeout(()=>this.emptydiv.nativeElement.scrollIntoView({behavior:"smooth"}),600)},error:e=>{alert(e.error)}})}add(e){(this._authservice.userdata()?.id??0)!=0&&(this.disablePostButton=!0,this._postservice.addNewPost({content:e.content,parentpostid:this.post.id,file:e.file}).pipe(x(1e3)).subscribe({next:o=>{this.getPost(),this.disablePostButton=!1,this._postservice.postSuccessSubject.next("success")},error:o=>{alert(o.error),this.disablePostButton=!1,this._postservice.postSuccessSubject.next("fail")}}))}static \u0275fac=function(t){return new(t||i)(r(T),r(B),r(A),r(I))};static \u0275cmp=v({type:i,selectors:[["app-postexpanded"]],viewQuery:function(t,o){if(t&1&&b(O,5),t&2){let n;y(n=S())&&(o.emptydiv=n.first)}},standalone:!0,features:[g],decls:1,vars:1,consts:[["emptydiv",""],[1,"container"],[3,"list","showSeperator"],["placeholderText","Post your reply",3,"disablePostButton"],[1,"text-area-p"],[3,"list"],["placeholderText","Post your reply",3,"sendText","disablePostButton"]],template:function(t,o){t&1&&l(0,N,9,7,"div",1),t&2&&m(o.post?0:-1)},dependencies:[R,E],styles:["textarea[_ngcontent-%COMP%]{margin:8px 0;width:100%;font-size:16px;padding:8px;border-radius:2px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;resize:none}"]})};export{j as PostexpandedComponent};
